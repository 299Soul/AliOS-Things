<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>物联网操作系统AliOS Things 3.3: AliOS Things 轻应用</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygenextra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="topbanner"><a href="https://github.com/Tencent/rapidjson" title="RapidJSON GitHub"><i class="githublogo"></i></a></div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.1 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md___users_yaoqiuguo_server_alios_3_3_components_amp__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">AliOS Things 轻应用 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>AliOS Things Mini Program (AMP)</p>
<h2><a class="anchor" id="autotoc_md66"></a>
简介</h2>
<p>**<a href="https://github.com/alibaba/AliOS-Things">AliOS Things</a>轻应用**是一套运行在资源受限设备上的轻量级应用软件框架。</p>
<p>业务应用代码脚本化，使用JavaScript脚本迅速构建轻应用。 嵌入式系统底座和应用完全解耦，使得IoT设备端应用生态的广度大幅拓宽。</p>
<p>Runtime采用JavaScript引擎加载用户脚本代码并执行，配合高可用的服务和工具提供应用的在线分发、更新及运维</p><ul>
<li>Runtime采用JavaScript应用引擎加载用户脚本代码并执行，配合高可用的服务和工具提供应用的在线分发、更新及运维</li>
<li>无需编译、烧录即可开发在物联网设备上运行的轻量级应用，快速开发，高效运维</li>
<li>可通过云存储托管设备端应用和资源，也通过集成云服务API，使得云端计算能力获得在设备端的延伸</li>
</ul>
<h2><a class="anchor" id="autotoc_md67"></a>
支持平台</h2>
<p>轻应用框架支持各类os，已支持的典型平台有</p><ul>
<li>linux</li>
<li>aos(AliOS Things)</li>
</ul>
<h2><a class="anchor" id="autotoc_md68"></a>
移植说明</h2>
<ul>
<li>适配层 系统适配代码在<code>adapter</code>目录中，结构如下 <div class="fragment"><div class="line">adapter</div>
<div class="line">├── include</div>
<div class="line">│   ├── amp_config.h    设备信息及native module配置相关</div>
<div class="line">│   ├── amp_fs.h        文件系统API</div>
<div class="line">│   ├── amp_kv.h        key,valueAPI</div>
<div class="line">│   ├── amp_network.h   网络API</div>
<div class="line">│   ├── amp_system.h    系统API</div>
<div class="line">│   └── peripheral      外设API</div>
<div class="line">├── Makefile            编译文件</div>
<div class="line">├── platform</div>
<div class="line">│   ├── aos             AliOS Things API适配参考实现</div>
<div class="line">│   └── linux           linux API适配参考实现</div>
<div class="line">└── README.md</div>
</div><!-- fragment --></li>
</ul>
<p>包含硬件外设、网络、操作系统相关和安全部分，可以参考linux的适配实现</p>
<ul>
<li>入口 AliOS Things 轻应用框架的主服务入口在 <code>entry/amp_entry.c</code> 中，调用 <code>amp_main()</code>， 即可启动轻应用服务，在你的项目工程中创建一个任务，将amp_main()注册进去即可。</li>
<li>服务实现 轻应用服务包含两个主要线程，一个是建立网络通道，服务于热更新、在线运维等后台服务 另一个是脚本引擎服务线程，用来解析脚本引擎</li>
</ul>
<h2><a class="anchor" id="autotoc_md69"></a>
使用说明</h2>
<h3><a class="anchor" id="autotoc_md70"></a>
1. 获取服务账号并绑定设备</h3>
<ul>
<li>联系SDK提供者获取账号token并绑定你的设备</li>
</ul>
<h3><a class="anchor" id="autotoc_md71"></a>
2. 获取命令行工具amp</h3>
<ul>
<li>Mac版 <a href="https://aos-oss-cn-shanghai.oss-cn-shanghai.aliyuncs.com/amp/v1.0.0/amp-macos.zip">https://aos-oss-cn-shanghai.oss-cn-shanghai.aliyuncs.com/amp/v1.0.0/amp-macos.zip</a></li>
<li>Windows版 <a href="https://aos-oss-cn-shanghai.oss-cn-shanghai.aliyuncs.com/amp/v1.0.0/amp-win.zip">https://aos-oss-cn-shanghai.oss-cn-shanghai.aliyuncs.com/amp/v1.0.0/amp-win.zip</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md72"></a>
3. 编写应用代码</h3>
<p>按如下目录结构，创建一个新应用 </p><div class="fragment"><div class="line">app                     应用目录</div>
<div class="line">├── board.json          配置文件</div>
<div class="line">└── index.js            应用入口</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md73"></a>
4. 应用代码热更新</h3>
<p>AliOS Things轻应用框架使用热更新方式把应用代码推送到设备上，使用命令行工具amp以完成此功能。 命令用法例举如下</p>
<h4><a class="anchor" id="autotoc_md74"></a>
用户登录</h4>
<div class="fragment"><div class="line">$ amp login &lt;token&gt;</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md75"></a>
列出绑定设备</h4>
<div class="fragment"><div class="line">$ amp device list</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md76"></a>
推送脚本到指定设备</h4>
<div class="fragment"><div class="line">$ amp put ./app &lt;device name&gt;</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
  </ul>
</div>
</body>
</html>
